
\begin{section}{Approach}
\label{sec:approach}

% INSERT FIGURE FOR THE ARCHITECTURE OF THE SYSTEM HERE
%\begin{figure}[ht!]
%	\centering
%	\includegraphics[width=0.48\textwidth]{det_arch.png}
%	\caption{Architecture of our adaptive system to include detection capabilities}
%	\label{fig:det_arch}
%\end{figure}

(******Place a block diagram showing the system architecture of the detection scheme from the adaptive controller****).

\subsection{Detection}
For detection, model reference adaptive control is an effective solution to the problem of dynamically changing or unknown systems. From (CITE reference) states that under the assumptions (reference to all 4 assumptions) ensures:
	\begin{enumerate}[label=(\roman*)]
	\item $y(k)$ and $u(k)$ are bounded 
	\item $\lim_{n\to\infty}(y(k)-y^*(k))=0$
	\item $\sum_{k=0}^\infty(y(k)-y^*(k))^2<\infty$
	\end{enumerate}
This states the system's output $y(k)$ will asymptotically converge to the tracking reference signal $r(k)$ in a finite amount of time. Properties of the modified projection algorithm include,
    \begin{enumerate}[label=(\roman*)]
	\item every iteration improves estimation:
	    \begin{align}
	        \|\theta(k)-\theta_0\|\leq\|\theta(k-1)-\theta_0\|\leq\|\theta(0)-\theta_0\|, k\geq1 \nonumber
	    \end{align}
	\item parameter variation has finite energy:
	    \begin{align}
	        \sum_{k=1}^\infty{\|\theta(k)-\theta(k-1)\|}^2\leq \infty \nonumber
	    \end{align}
	\item parameter variation converges to zero:
	    \begin{align}
	        \lim_{k\to\infty}(\theta(k)-\theta(k-1))=0 \nonumber
	    \end{align}
	    \begin{align}
	        \lim_{k\to\infty}(\theta(k)-\theta(k-N))=0, \text{any finite} N>0 \nonumber
	    \end{align}
	\end{enumerate}
when the persistent excitation condition has been met consisting of:
    \begin{enumerate}[label=(\alph*)]
	\item $A(z^{-1})$ is stable.
	\item $A(z^{-1})$ and $B(z^{-1})$ are coprime.
	\item $u(k)$ has as many frequencies as the number of parameters in $\theta_0$.
	\end{enumerate}
Understanding these conditions and properties improves performance of the adaptive controller and detection capabilities.

Each system state $\bm{x}_i$ where $i=1,2,\dots,n_x$ and $n_x$ is the total number of states has sensors $\bm{s}_i_j$ for $j=1,2,\dots,n_{s_i}$ where $n_{s_i}$ is the number of sensors that can extract sensor measurement data for a given state. These sensor measurements adhere to the above adaptive control assurances, with the addition of noise uncertainties.

Each of the sensors $\bm{s}_i_j$ providing measurement data of each states experience the same convergence behavior to the tracking signal where sensors are uncompromised. This remains true with a changing reference signal, system dynamics, or bounded disturbances. When an attacker maliciously falsifies a sensor signal, the $j^{th}$ sensor of the $i^{th}$ state from the sensor set $\bm{s}_i_j$ no longer follows the converge rate compared to the uncompromised sensor measurements. 

\subsection{Sensor Removal}

As the $j^{th}$ sensor of the $i^{th}$ state no longer follows convergence characteristics, it is removed from operation to ensure proper control and navigation safety. The new set of sensors providing measurement data for the $i^{th}$ state is $\bm{s}_i_j^*$ where $j^*=1,2,\dots,n_{s_i}-h_s$ when $h_s$ is defined as the total number of compromised sensors.

\subsection{Estimation}
The statistical technique of confidence intervals from (Reference to proper section) is the foundation of how this work solves estimation. Confidence intervals are used to guarantee with a confidence percentage that the true mean $\bar{x}$ lies within a $2D$ radial interval $\epsilon$, which is determined by a standard deviation $\sigma$ and the number of samples $N$. 

Assuming the data being used for estimation, regardless if it's raw or filtered data, is that it comes in the form $\mathcal{N}(0,\sigma_d)$ where the data population standard deviation $\sigma_d$ is known for any sensor combination. From [reference to confidence interval equation] we can find an interval of a determined confidence percentage that the vehicle is within that region to ensure safety. 

The assumption of a confidence interval is the true mean remains static on the given axis. This cannot be assumed in the case of position estimation of a navigating vehicle. A pseudo-static form of a confidence interval is made to compensate for translation of position $\bm{x}(k-l)$, where $l=1,2,\dots,N-1$. The $N-1$ number of previous position data points are represented as if they all were taken from the current position $\bm{x}(k)$ in time. (SHOW THIS IN A FIGURE FOR BETTER VISUAL UNDERSTANDING, either Matlab or Powerpoint). These samples $\bm{x}_p$, where $p=1,2,\dots,N$ form the set $\mathcal{\bm{S}}=\begin{bmatrix}\bm{x}_1,\bm{x}_2,\dots,\bm{x}_N \end{bmatrix}$. Further, we can break down the set into two vectors $\bm{s}_x=\begin{bmatrix} x_x_1,x_x_2,\dots,x_x_N \end{bmatrix}$ and $\bm{s}_y=\begin{bmatrix} x_y_1,x_y_2,\dots,x_y_N \end{bmatrix}$ which represent the $x$ and $y$ coordinate data, respectively. 

Translating the data coordinates into a pseudo-static form will create the set $\mathcal{\bm{S}}_t$, creating the two pseudo-static vectors $\bm{s}_{t_x}=\begin{bmatrix} x_{t_x_1},x_{t_x_2},\dots,x_{t_x_N} \end{bmatrix}$ and $\bm{s}_{t_y}=\begin{bmatrix} x_{t_y_1},x_{t_y_2},\dots,\bm{x}_{t_y_N} \end{bmatrix}$. Each element of these updated vectors are calculated as:
    \begin{equation}
	x_{t_x_w} = x_x(k-w+1)+\sum_{j=1}^w v(k-j)\cos{\theta(k-j)T_s}
	\end{equation}
	\begin{equation}
	x_{t_y_w} = x_y(k-w+1)+\sum_{j=1}^w v(k-j)\sin{\theta(k-j)T_s}
	\end{equation}
The mean of each vector is written as $\bar{s}_x$ and $\bar{s}_y$ is used for the calculation of the confidence interval.

Creating a pseudo-static case with these past position data samples introduces higher uncertainty. Uncertainties regarding the actuator $\sigma_a$, current velocity sensor $\sigma_v$, and current heading angle sensor $\sigma_h$ need to be accounted for. To guarantee the true position of the vehicle is within the estimation radial bounds $\epsilon$, the maximum error in position due to the actuator and sensor noises over the furthest sample in time in $\mathcal{\bm{S}}$ is calculated as:
    \begin{equation}
	DISCUSS THIS
	\end{equation}
Doing this will protect the integrity of the confidence interval percentage, ensuring the vehicle is within the estimation bounds.


\subsection{Adaptive Motion Planning}
With uncertainty of sensor measurements, with or without the loss of a compromised sensor, there needs to be guarantees to safely navigate a vehicle without accidents.


% INSERT ALGORITHM FOR REPLANNING VELOCITY
%\begin{algorithm}
%   \caption{Adaptive Motion for Safety Guarantee} 
%   \label{alg:adapt_motion} 
%    \begin{algorithmic}[1]
	
%	\State Known Information N, \sigma, z^{*}
%	\State Collect all previous N positions, velocities, and angles
%	\State Calculate Confidence interval for psuedo-static case
%	\State Calculate the initial reachable tube $ R(\boldsymbol{x}_0, \bm{u}(t), t \in [t_s, t_s+T] ) $
%	\State Calculate $ t_{s+1} $    

%	\end{algorithmic}
%\end{algorithm}



\end{section} 